<!DOCTYPE HTML>
<!--
	Halcyonic 3.1 by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
		<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
		<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
		<script src="../js/query.js"></script>
		<script src="../js/config.js"></script>
		<script src="../js/skel.min.js"></script>
		<script src="../js/skel-panels.min.js"></script>
		<script src="../js/skel-tabs.min.js"></script>
		<script src = "http://d3js.org/d3.v3.min.js"></script>
		<script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
		<noscript>
			<link rel="stylesheet" href="../css/skel-noscript.css" />
			<link rel="stylesheet" href="../css/style-desktop.css" />
			<link rel="stylesheet" href="css/style.css" />
		</noscript>
		<style>
			.stroke {
			  fill: none;
			  stroke: #999;
			  stroke-width: 1px;
			}

			.fill {
			  fill: #fff;
			}

			.land {
			  fill: #ddd;
			}

			.boundary {
			  fill: none;
			  stroke: #fff;
			}
		</style>

	</head>
	<body>
		<div id="chart"> </div>

		<script>
			var color = d3.scale.category20();

			var width = 900,
			height = 900;

			var cuisine = getQueryVariable("cuisine");
			var links = getQueryVariable("links");
		

											
			var svg = d3.select("body").append("svg")
			  .attr("width", width)
			  .attr("height", height);

			var force = d3.layout.force()
			  .size([width, height]);

			var csvFile = "data/" + cuisine + links + ".csv";
			console.log(csvFile);
			d3.csv(csvFile, function(links) {
				var nodesByName = {};

				// Create nodes for each unique source and target.
				links.forEach(function(link) {
				  link.source = nodeByName(link.source);
				  link.target = nodeByName(link.target);
				});

				// Extract the array of nodes from the map by name.
				var nodes = d3.values(nodesByName);

				// Create the link lines.
				var link = svg.selectAll(".link")
				    .data(links)
				  .enter().append("line")
				    .attr("class", "link");

				// Create the node circles.
				var node = svg.selectAll(".node")
				    .data(nodes)
				  .enter().append("circle")
				    .attr("class", "node")
				    .attr("r", 4.5)
				    .call(force.drag);

				// Start the force layout.
				force
				    .nodes(nodes)
				    .links(links)
				    .on("tick", tick)
				    .start();

				function tick() {
				  link.attr("x1", function(d) { return d.source.x; })
				      .attr("y1", function(d) { return d.source.y; })
				      .attr("x2", function(d) { return d.target.x; })
				      .attr("y2", function(d) { return d.target.y; });

				  node.attr("cx", function(d) { return d.x; })
				      .attr("cy", function(d) { return d.y; });
				}

				function nodeByName(name) {
				  return nodesByName[name] || (nodesByName[name] = {name: name});
				}
				});
		</script>
			
	</body>
</html>
